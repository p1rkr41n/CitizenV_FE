{"remainingRequest":"/home/steam/Documents/js/CitizenV_FE-4149ab9e3b68778b3ba3c5f5a9db400b8b78fb2c/devweb/node_modules/babel-loader/lib/index.js!/home/steam/Documents/js/CitizenV_FE-4149ab9e3b68778b3ba3c5f5a9db400b8b78fb2c/devweb/node_modules/eslint-loader/index.js??ref--13-0!/home/steam/Documents/js/CitizenV_FE-4149ab9e3b68778b3ba3c5f5a9db400b8b78fb2c/devweb/src/helpers/general.js","dependencies":[{"path":"/home/steam/Documents/js/CitizenV_FE-4149ab9e3b68778b3ba3c5f5a9db400b8b78fb2c/devweb/src/helpers/general.js","mtime":1640137642634},{"path":"/home/steam/Documents/js/CitizenV_FE-4149ab9e3b68778b3ba3c5f5a9db400b8b78fb2c/devweb/babel.config.js","mtime":1640059087000},{"path":"/home/steam/Documents/js/CitizenV_FE-4149ab9e3b68778b3ba3c5f5a9db400b8b78fb2c/devweb/node_modules/cache-loader/dist/cjs.js","mtime":1638436560621},{"path":"/home/steam/Documents/js/CitizenV_FE-4149ab9e3b68778b3ba3c5f5a9db400b8b78fb2c/devweb/node_modules/babel-loader/lib/index.js","mtime":1638436560643},{"path":"/home/steam/Documents/js/CitizenV_FE-4149ab9e3b68778b3ba3c5f5a9db400b8b78fb2c/devweb/node_modules/eslint-loader/index.js","mtime":1638436568252}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplKHN0b3JlLCByb3V0ZXIpIHsKICByb3V0ZXIuYmVmb3JlRWFjaChmdW5jdGlvbiAodG8sIGZyb20sIG5leHQpIHsKICAgIHZhciByZXF1aXJlc0F1dGggPSB0by5tYXRjaGVkLnNvbWUoZnVuY3Rpb24gKHJlY29yZCkgewogICAgICByZXR1cm4gcmVjb3JkLm1ldGEucmVxdWlyZXNBdXRoOwogICAgfSk7CiAgICB2YXIgY3VycmVudFVzZXIgPSBzdG9yZS5zdGF0ZS5BdXRoLmN1cnJlbnRVc2VyOwoKICAgIGlmIChyZXF1aXJlc0F1dGggJiYgIWN1cnJlbnRVc2VyKSB7CiAgICAgIG5leHQoIi9sb2dpbiIpOwogICAgfSBlbHNlIGlmICh0by5wYXRoID09PSAiL2xvZ2luIiAmJiBjdXJyZW50VXNlcikgewogICAgICBuZXh0KCIvIik7CiAgICB9IGVsc2UgewogICAgICBuZXh0KCk7CiAgICB9CiAgfSk7CiAgYXhpb3MuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShudWxsLCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgewogICAgICBzdG9yZS5jb21taXQoIkxPR09VVCIpOwogICAgICByb3V0ZXIucHVzaCgiL2xvZ2luIik7CiAgICB9CgogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICB9KTsKCiAgaWYgKHN0b3JlLmdldHRlcnMuY3VycmVudFVzZXIpIHsKICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWyJBdXRob3JpemF0aW9uIl0gPSAiQmVhcmVyICIuY29uY2F0KHN0b3JlLmdldHRlcnMuQ1VSUkVOVF9VU0VSLnRva2VuKTsKICB9Cn0="},{"version":3,"sources":["/home/steam/Documents/js/CitizenV_FE-4149ab9e3b68778b3ba3c5f5a9db400b8b78fb2c/devweb/src/helpers/general.js"],"names":["initialize","store","router","beforeEach","to","from","next","requiresAuth","matched","some","record","meta","currentUser","state","Auth","path","axios","interceptors","response","use","error","status","commit","push","Promise","reject","getters","defaults","headers","common","CURRENT_USER","token"],"mappings":";AAAA,OAAO,SAASA,UAAT,CAAoBC,KAApB,EAA2BC,MAA3B,EAAmC;AACxCA,EAAAA,MAAM,CAACC,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpC,QAAMC,YAAY,GAAGH,EAAE,CAACI,OAAH,CAAWC,IAAX,CAAgB,UAACC,MAAD;AAAA,aAAYA,MAAM,CAACC,IAAP,CAAYJ,YAAxB;AAAA,KAAhB,CAArB;AACA,QAAMK,WAAW,GAAGX,KAAK,CAACY,KAAN,CAAYC,IAAZ,CAAiBF,WAArC;;AACA,QAAIL,YAAY,IAAI,CAACK,WAArB,EAAkC;AAChCN,MAAAA,IAAI,CAAC,QAAD,CAAJ;AACD,KAFD,MAEO,IAAIF,EAAE,CAACW,IAAH,KAAY,QAAZ,IAAwBH,WAA5B,EAAyC;AAC9CN,MAAAA,IAAI,CAAC,GAAD,CAAJ;AACD,KAFM,MAEA;AACLA,MAAAA,IAAI;AACL;AACF,GAVD;AAYAU,EAAAA,KAAK,CAACC,YAAN,CAAmBC,QAAnB,CAA4BC,GAA5B,CAAgC,IAAhC,EAAsC,UAACC,KAAD,EAAW;AAC/C,QAAIA,KAAK,CAACF,QAAN,CAAeG,MAAf,KAA0B,GAA9B,EAAmC;AACjCpB,MAAAA,KAAK,CAACqB,MAAN,CAAa,QAAb;AACApB,MAAAA,MAAM,CAACqB,IAAP,CAAY,QAAZ;AACD;;AAED,WAAOC,OAAO,CAACC,MAAR,CAAeL,KAAf,CAAP;AACD,GAPD;;AASA,MAAInB,KAAK,CAACyB,OAAN,CAAcd,WAAlB,EAA+B;AAC7BI,IAAAA,KAAK,CAACW,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CACE,eADF,qBAEc5B,KAAK,CAACyB,OAAN,CAAcI,YAAd,CAA2BC,KAFzC;AAGD;AACF","sourcesContent":["export function initialize(store, router) {\n  router.beforeEach((to, from, next) => {\n    const requiresAuth = to.matched.some((record) => record.meta.requiresAuth);\n    const currentUser = store.state.Auth.currentUser;\n    if (requiresAuth && !currentUser) {\n      next(\"/login\");\n    } else if (to.path === \"/login\" && currentUser) {\n      next(\"/\");\n    } else {\n      next();\n    }\n  });\n\n  axios.interceptors.response.use(null, (error) => {\n    if (error.response.status === 401) {\n      store.commit(\"LOGOUT\");\n      router.push(\"/login\");\n    }\n\n    return Promise.reject(error);\n  });\n\n  if (store.getters.currentUser) {\n    axios.defaults.headers.common[\n      \"Authorization\"\n    ] = `Bearer ${store.getters.CURRENT_USER.token}`;\n  }\n}\n"]}]}